<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Corsi - Giusy & Gioia</title>
  <link rel="stylesheet" href="style.css">
  <!-- Font già inclusi nel CSS, ma per sicurezza nel rendering iniziale -->
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
</head>
<body>

  <!-- NAVBAR UGUALE A INDEX.HTML -->
        <nav class="navbar">
        <div class="logo">Giusy <span>&</span> Gioia</div>
        
        <!-- MENU DESKTOP -->
        <ul class="nav-links">
            <li><a href="it.html" class="active">Home</a></li>
            <li><a href="#">Servizi</a></li>
            <li><a href="corsi.html">Corsi</a></li>
            <li><a href="#">Chi Siamo</a></li>
            <li><a href="contatti.html" style="color:var(--col-bronze)">Contatti</a></li>
            
            <!-- Selettore Desktop (IT Attivo) -->
            <li class="lang-switch desktop-only">
                <a href="index.html" class="lang-btn">DE</a>
                <span class="lang-btn active">IT</span>
                <a href="en.html" class="lang-btn">EN</a>
            </li>
        </ul>

        <!-- CONTROLLI MOBILE (Visibili solo su smartphone) -->
        <div class="mobile-controls">
            <div class="lang-switch-mobile">
                <a href="index.html">DE</a>
                <span class="active">IT</span>
                <a href="en.html">EN</a>
            </div>
            <div class="burger">
                <div class="line1"></div><div class="line2"></div><div class="line3"></div>
            </div>
        </div>
    </nav>



  <!-- HERO CORSI IT -->
  <header class="hero" style="
    height: 50vh; 
    min-height: 400px; 
    background: linear-gradient(rgba(255,255,255,0.6), rgba(255,255,255,0.4)), url('Immagini/corsi-hero.jpg'); 
    background-size: cover; 
    background-position: center; 
    display: flex; 
    flex-direction: column; 
    justify-content: center; 
    align-items: center; 
    text-align: center;">
    
    <h1 style="font-size: 3rem; margin-bottom: 15px; color: var(--col-text-main);">I nostri corsi</h1>
    <p style="font-size: 1.3rem; max-width: 600px; color: var(--col-text-main); font-weight: 500;">
      Preparati al meglio per il tuo percorso, con corsi pratici e personalizzati
    </p>
  </header>


  <!-- SEZIONE CORSI -->
  <section class="corsi-section" style="padding: 80px 5%; background-color: var(--col-white);">
    <div class="container" style="max-width: 1200px; margin: 0 auto;">
      
      <div class="corsi-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 40px;">

        <!-- CORSO PRENATALE -->
        <article class="corso-card" data-corso-id="prenatale" style="background: white; border-radius: var(--radius-card); overflow: hidden; box-shadow: var(--shadow-soft);">
          <div class="corso-image" style="height: 250px;">
            <img src="Immagini/prenatale.jpg" alt="Corso Prenatale" style="width: 100%; height: 100%; object-fit: cover;">
          </div>
          <div class="corso-content" style="padding: 30px;">
            <h2 style="color: var(--col-text-main); margin-bottom: 15px; font-size: 1.8rem;">Corso Prenatale</h2>
            <p style="color: var(--col-text-light); margin-bottom: 25px;">Un percorso completo per future mamme e papà: dal travaglio al primo allattamento. Respirazione, posizioni, gestione del dolore naturale e tanto altro.</p>
            
            <div class="prossime-date">
              <h3 style="font-size: 1.1rem; margin-bottom: 15px; color: var(--col-bronze);">Prossime date</h3>
              <table class="date-table" style="width: 100%; border-collapse: collapse; font-size: 0.9rem;">
                <thead>
                  <tr style="background: var(--col-pink-bg); color: var(--col-text-main);">
                    <th style="padding: 10px; text-align: left;">Data</th>
                    <th style="padding: 10px; text-align: left;">Ora</th>
                    <th style="padding: 10px; text-align: left;">Note</th>
                  </tr>
                </thead>
                <tbody class="dates-body">
                  <!-- JS riempie qui -->
                </tbody>
              </table>
            </div>
          </div>
        </article>

        <!-- CORSO MAMMA+PAPA -->
        <article class="corso-card" data-corso-id="madre_padre" style="background: white; border-radius: var(--radius-card); overflow: hidden; box-shadow: var(--shadow-soft);">
          <div class="corso-image" style="height: 250px;">
            <img src="Immagini/mamma_papa.jpg" alt="Corso Mamma + Papà" style="width: 100%; height: 100%; object-fit: cover;">
          </div>
          <div class="corso-content" style="padding: 30px;">
            <h2 style="color: var(--col-text-main); margin-bottom: 15px; font-size: 1.8rem;">Corso Mamma + Papà</h2>
            <p style="color: var(--col-text-light); margin-bottom: 25px;">Unite le forze! Corso di coppia per condividere ansie, sogni e responsabilità. Comunicazione, divisione dei compiti e prime cure insieme.</p>
            
            <div class="prossime-date">
              <h3 style="font-size: 1.1rem; margin-bottom: 15px; color: var(--col-bronze);">Prossime date</h3>
              <table class="date-table" style="width: 100%; border-collapse: collapse; font-size: 0.9rem;">
                <thead>
                  <tr style="background: var(--col-pink-bg); color: var(--col-text-main);">
                    <th style="padding: 10px; text-align: left;">Data</th>
                    <th style="padding: 10px; text-align: left;">Ora</th>
                    <th style="padding: 10px; text-align: left;">Note</th>
                  </tr>
                </thead>
                <tbody class="dates-body">
                  <!-- JS riempie qui -->
                </tbody>
              </table>
            </div>
          </div>
        </article>

        <!-- CORSO POSTNATALE -->
        <article class="corso-card" data-corso-id="postnatale" style="background: white; border-radius: var(--radius-card); overflow: hidden; box-shadow: var(--shadow-soft);">
          <div class="corso-image" style="height: 250px;">
            <img src="Immagini/postnatale.jpg" alt="Corso Postnatale" style="width: 100%; height: 100%; object-fit: cover;">
          </div>
          <div class="corso-content" style="padding: 30px;">
            <h2 style="color: var(--col-text-main); margin-bottom: 15px; font-size: 1.8rem;">Corso Postnatale</h2>
            <p style="color: var(--col-text-light); margin-bottom: 25px;">Ripresa dopo il parto: allattamento, sonno, cura del perineo, ritorno alla forma. Un supporto concreto per i primi mesi con il bebè.</p>
            
            <div class="prossime-date">
              <h3 style="font-size: 1.1rem; margin-bottom: 15px; color: var(--col-bronze);">Prossime date</h3>
              <table class="date-table" style="width: 100%; border-collapse: collapse; font-size: 0.9rem;">
                <thead>
                  <tr style="background: var(--col-pink-bg); color: var(--col-text-main);">
                    <th style="padding: 10px; text-align: left;">Data</th>
                    <th style="padding: 10px; text-align: left;">Ora</th>
                    <th style="padding: 10px; text-align: left;">Note</th>
                  </tr>
                </thead>
                <tbody class="dates-body">
                  <!-- JS riempie qui -->
                </tbody>
              </table>
            </div>
          </div>
        </article>

      </div>
    </div>
  </section>

  <!-- FOOTER -->
    <footer style="background:#4a4a4a; color:white; padding:40px; text-align:center; margin-top:50px;">
        <p>&copy; 2025 Giusy & Gioia Hebammenpraxis</p>
    </footer>

  <!-- SCRIPT NAVBAR & CSV -->
<!-- Libreria PapaParse per leggere CSV in modo affidabile -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>

<script>
    // 1. MENU MOBILE
    const burger = document.querySelector('.burger');
    const nav = document.querySelector('.nav-links');
    if(burger){
      burger.addEventListener('click', () => {
        nav.classList.toggle('nav-active');
        burger.classList.toggle('toggle');
      });
    }

    // 2. SCRIPT CON PAPAPARSE
    function loadCourseDates() {
      const sheetUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSu6nL6CowIQl5q4V2xcgRI1OPsbPDRxFrXNh6NBhsl5_ab04VdC39zVSeJF64WR_8miASaZXxAsSYR/pub?gid=547202508&single=true&output=csv';
      
      // PapaParse scarica e converte il CSV automaticamente
      Papa.parse(sheetUrl, {
        download: true,
        header: true, // Usa la prima riga come intestazione (Corso, Data, Ora...)
        skipEmptyLines: true,
        complete: function(results) {
          console.log("Dati scaricati:", results.data); // Debug in console

          const corsoBodies = document.querySelectorAll('.dates-body');
          corsoBodies.forEach(b => b.innerHTML = ''); // Pulisce

          results.data.forEach(row => {
            // PapaParse crea un oggetto per ogni riga usando i nomi delle colonne
            // Es: row.Corso, row.Data, row.Ora
            
            if (!row.Corso) return; // Salta righe vuote

            const idCorso = row.Corso.toLowerCase().trim(); // 'prenatale', 'madre_padre'
            const dataEv = row.Data;
            const ora = row.Ora;
            const note = row.Note || '';

            // Cerca la card HTML
            const targetBody = Array.from(corsoBodies).find(body => 
               body.closest('.corso-card').dataset.corsoId === idCorso
            );

            if (targetBody && dataEv) {
               const tr = document.createElement('tr');
               tr.innerHTML = `
                 <td style="padding: 10px; border-bottom: 1px solid #eee;">${dataEv}</td>
                 <td style="padding: 10px; border-bottom: 1px solid #eee;">${ora}</td>
                 <td style="padding: 10px; border-bottom: 1px solid #eee;">${note}</td>
               `;
               targetBody.appendChild(tr);
            }
          });
        },
        error: function(err) {
          console.error("Errore PapaParse:", err);
          // Se fallisce il download diretto, riprova col Proxy
          loadWithProxy(); 
        }
      });
    }

    // Fallback con Proxy se il download diretto è bloccato
    async function loadWithProxy() {
        console.log("Riprovo con Proxy...");
        const sheetUrl = '';
        const proxyUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(sheetUrl)}`;
        
        try {
            const resp = await fetch(proxyUrl);
            const json = await resp.json();
            const csvData = json.contents;
            
            // Parsa il testo ricevuto dal proxy
            Papa.parse(csvData, {
                header: true,
                skipEmptyLines: true,
                complete: function(results) {
                   // Stessa logica di sopra...
                   const corsoBodies = document.querySelectorAll('.dates-body');
                   corsoBodies.forEach(b => b.innerHTML = '');
                   
                   results.data.forEach(row => {
                        if (!row.Corso) return;
                        const idCorso = row.Corso.toLowerCase().trim();
                        const targetBody = Array.from(corsoBodies).find(body => 
                            body.closest('.corso-card').dataset.corsoId === idCorso
                        );
                        if (targetBody && row.Data) {
                            const tr = document.createElement('tr');
                            tr.innerHTML = `<td style="padding: 10px; border-bottom: 1px solid #eee;">${row.Data}</td><td style="padding: 10px; border-bottom: 1px solid #eee;">${row.Ora}</td><td style="padding: 10px; border-bottom: 1px solid #eee;">${row.Note || ''}</td>`;
                            targetBody.appendChild(tr);
                        }
                   });
                }
            });
        } catch(e) { console.error("Tutto fallito", e); }
    }

    document.addEventListener('DOMContentLoaded', loadCourseDates);
</script>


</body>
</html>
